# DETOX - App Blocker for iOS

React Native –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ iOS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Screen Time API.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üïê **–¶–∏—Ñ–µ—Ä–±–ª–∞—Ç –≤—Ä–µ–º–µ–Ω–∏** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ —Å—Ç–∏–ª–µ —Ñ–∏–ª—å–º–∞ "–í—Ä–µ–º—è"
- üîí **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Screen Time API –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚è∞ **–†–∞—Å–ø–∏—Å–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚è∏Ô∏è **–ü–∞—É–∑–∞ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üé® **–ß–µ—Ä–Ω–æ-–±–µ–ª—ã–π —Ä–µ–∂–∏–º** - –æ–ø—Ü–∏—è –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ—Ç—á–µ—Ç—ã –æ Screen Time –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- React Native 0.81.5
- Expo Router
- TypeScript
- Screen Time API (FamilyControls framework)
- AsyncStorage –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å primary —Ü–≤–µ—Ç–æ–º #00EB3F

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –î–ª—è iOS:
```bash
cd ios
pod install
cd ..
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
npm run ios
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- iOS 15.0+
- Xcode 14+
- CocoaPods

### –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:

1. **Screen Time API** - –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `DETOX.entitlements`
   - –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

2. **Location** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–ª—è location-based –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `Info.plist`

### –ù–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –¥–≤–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª—è:

1. **ScreenTimeModule** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Screen Time API
   - `ios/DETOX/ScreenTimeModule.swift`
   - `ios/DETOX/ScreenTimeModule.m`

2. **GrayscaleModule** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - `ios/DETOX/GrayscaleModule.swift`
   - `ios/DETOX/GrayscaleModule.m`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/                    # –≠–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Expo Router)
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # –¢–∞–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx      # Home —ç–∫—Ä–∞–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report.tsx     # Report —ç–∫—Ä–∞–Ω
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.tsx   # Settings —ç–∫—Ä–∞–Ω
‚îÇ   ‚îú‚îÄ‚îÄ onboarding.tsx     # –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ê–¥–∞–ø—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ paywall.tsx        # –ü–µ–π–≤–æ–ª (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ê–¥–∞–ø—Ç–∏)
‚îú‚îÄ‚îÄ components/            # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ time-dial.tsx      # –¶–∏—Ñ–µ—Ä–±–ª–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ schedule-form.tsx  # –§–æ—Ä–º–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îú‚îÄ‚îÄ hooks/                 # React —Ö—É–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-blocker.ts     # –•—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π
‚îú‚îÄ‚îÄ modules/               # –ù–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
‚îÇ   ‚îú‚îÄ‚îÄ screen-time/       # Screen Time API –º–æ–¥—É–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ grayscale/         # Grayscale –º–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ types/                 # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ blocker.ts         # –¢–∏–ø—ã –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ timeFormatter.ts   # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
‚îî‚îÄ‚îÄ ios/                   # iOS –Ω–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
    ‚îî‚îÄ‚îÄ DETOX/
        ‚îú‚îÄ‚îÄ ScreenTimeModule.swift
        ‚îú‚îÄ‚îÄ GrayscaleModule.swift
        ‚îî‚îÄ‚îÄ ...
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω Home
2. –ù–∞–∂–º–∏—Ç–µ "Start Blocking"
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ Screen Time
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
5. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞—á–Ω–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

1. –ù–∞ —ç–∫—Ä–∞–Ω–µ Home –Ω–∞–∂–º–∏—Ç–µ "+" —Ä—è–¥–æ–º —Å "Blocking Schedules"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
   - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
   - –î–Ω–∏ –Ω–µ–¥–µ–ª–∏
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

### –ß–µ—Ä–Ω–æ-–±–µ–ª—ã–π —Ä–µ–∂–∏–º

1. –ü—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
2. –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "Grayscale Mode"
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–≠–∫—Ä–∞–Ω Report –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –û–±—â–µ–µ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–Ω—è—Ç–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –±–ª–∞–≥–æ–¥–∞—Ä—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- –¢–æ–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ê–¥–∞–ø—Ç–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ê–¥–∞–ø—Ç–∏:

- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥**: –≠–∫—Ä–∞–Ω `app/onboarding.tsx` - –∑–∞–≥–ª—É—à–∫–∞, –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ê–¥–∞–ø—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- **–ü–µ–π–≤–æ–ª**: –≠–∫—Ä–∞–Ω `app/paywall.tsx` - –∑–∞–≥–ª—É—à–∫–∞, –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ê–¥–∞–ø—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

**–í–∞–∂–Ω–æ**: –í—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Ç.–¥.) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ê–¥–∞–ø—Ç–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm start
```

### –°–±–æ—Ä–∫–∞ –¥–ª—è iOS

```bash
npm run ios
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
npm run lint
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### Screen Time API

Screen Time API –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FamilyActivityPicker –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### –ß–µ—Ä–Ω–æ-–±–µ–ª—ã–π —Ä–µ–∂–∏–º

iOS –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –Ω–∞–ø—Ä—è–º—É—é –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å —Ü–≤–µ—Ç–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã. –ú–æ–¥—É–ª—å GrayscaleModule –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤—Ä—É—á–Ω—É—é.

## –õ–∏—Ü–µ–Ω–∑–∏—è

Private
